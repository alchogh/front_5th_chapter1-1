import{M as s,L as a,P as i,E as r,r as d,g as l}from"./class-router-CRQ-589F.js";class u{constructor(){this.routes=new Map,this.defaultHandler=()=>{const t=document.getElementById("root");new r(t)},window.addEventListener("hashchange",this.handleRouteChange.bind(this)),window.addEventListener("load",this.handleRouteChange.bind(this))}addRoute(t,e){return this.routes.set(t,e),this}setDefault(t){return this.defaultHandler=t,this}navigateTo(t){t.startsWith("/")||(t="/"+t),window.location.hash=`#${t}`,this.handleRouteChange()}handleRouteChange(){const t=window.location.hash||"#/",e=l(),o=this.routes.get(t);if(document.getElementById("root")){if(e&&t==="#/login"){this.navigateTo("/");return}if(!e&&t==="#/profile"){this.navigateTo("/login");return}o?o(e):this.defaultHandler()}}}const h={init:()=>{const n=new u;n.addRoute("#/",t=>{const e=document.getElementById("root");new s(e,{user:t})}).addRoute("#/login",()=>{const t=document.getElementById("root");new a(t)}).addRoute("#/profile",t=>{const e=document.getElementById("root");new i(e,{user:t})}).setDefault(()=>{const t=document.getElementById("root");new r(t)}),document.addEventListener("click",t=>{const e=t.target.closest("a");if(!e)return;if(e.id==="logout"){t.preventDefault(),d(),n.navigateTo("login");return}const o=e.getAttribute("href");o&&o.startsWith("#")&&(t.preventDefault(),n.navigateTo(o.replace(/^#\/?/,"")))})}};h.init();
